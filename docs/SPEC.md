# 算法团队项目管理系统 - 产品规格说明书 (SPEC)

> **文档版本**: v1.0  
> **创建日期**: 2026-01-14  
> **状态**: 待评审  

---

## 目录

1. [项目概述](#1-项目概述)
2. [系统架构](#2-系统架构)
3. [功能模块](#3-功能模块)
4. [数据模型](#4-数据模型)
5. [API设计](#5-api设计)
6. [UI/UX设计](#6-uiux设计)
7. [技术选型](#7-技术选型)
8. [开发计划](#8-开发计划)
9. [附录](#9-附录)

---

## 1. 项目概述

### 1.1 项目背景

算法团队在日常工作中需要对AI项目进行有效管理，包括：
- 团队成员工时投入的记录与统计
- 项目功能开发进度的跟踪
- 日常工作内容的收集与汇报
- 基于工作数据的智能周报生成

目前缺乏一个统一的管理系统来整合这些需求，因此需要打造一套定制化的项目管理系统。

### 1.2 项目目标

| 目标 | 描述 |
|------|------|
| **工时透明化** | 实现团队成员工时投入的精确记录与可视化分析 |
| **进度可控化** | 建立项目-任务-工时的三级管理体系，实时掌控项目进度 |
| **汇报自动化** | 利用AI能力自动生成个人周报和项目周报 |
| **决策数据化** | 提供多维度数据看板，支撑管理决策 |

### 1.3 用户角色

| 角色 | 权限描述 |
|------|----------|
| **系统管理员** | 系统配置、成员管理、全局数据查看 |
| **项目负责人** | 项目创建与管理、任务分配、项目周报查看 |
| **团队成员** | 日报填写、任务状态更新、个人数据查看 |

### 1.4 核心业务流程

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           核心业务流程                                    │
└─────────────────────────────────────────────────────────────────────────┘

[项目创建] → [会议纪要记录] → [任务创建(关联会议纪要)] → [任务分配]
                                        ↓
                               [每日工作执行]
                                        ↓
                          [日报填写(关联任务+工时)]
                                        ↓
                            [任务状态更新] ←──────┐
                                        ↓         │
                         [AI生成周报] ─────────────┤
                          ├─ 个人周报              │
                          └─ 项目周报              │
                                        ↓         │
                            [数据看板分析] ────────┘
```

---

## 2. 系统架构

### 2.1 整体架构

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              前端层                                      │
│                    React + TypeScript + Ant Design Pro                   │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                              API网关层                                   │
│                           Nginx / Traefik                                │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
┌─────────────────────────────────────────────────────────────────────────┐
│                              后端服务层                                   │
│                         Python FastAPI                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │
│  │ 用户服务  │  │ 项目服务  │  │ 任务服务  │  │ 日报服务  │  │ AI服务   │  │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │
└─────────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┼───────────────┐
                    ▼               ▼               ▼
            ┌──────────┐    ┌──────────┐    ┌──────────┐
            │PostgreSQL│    │  Redis   │    │ AI API   │
            │ 主数据库  │    │   缓存   │    │ (LLM)    │
            └──────────┘    └──────────┘    └──────────┘
```

### 2.2 数据流向

```
日报填写 ──→ daily_work_logs表 ──→ 触发更新tasks.actual_hours
                │
                ▼
        AI周报生成服务 ──→ weekly_reports表
                │
                ▼
          数据看板展示
```

---

## 3. 功能模块

### 3.1 模块总览

| 模块 | 功能 | 优先级 |
|------|------|--------|
| M1 - 成员管理 | 成员CRUD、角色权限 | P0 |
| M2 - 项目管理 | 项目CRUD、成员分配 | P0 |
| M3 - 会议纪要 | 会议纪要CRUD、关联项目 | P0 |
| M4 - 任务管理 | 任务CRUD、状态流转、关联会议纪要 | P0 |
| M5 - 日报管理 | 日报填写、关联任务、工时记录 | P0 |
| M6 - AI周报 | AI生成个人/项目周报 | P1 |
| M7 - 数据看板 | 个人/项目视角统计分析 | P1 |
| M8 - 系统设置 | 系统配置、权限管理 | P2 |

### 3.2 M1 - 成员管理

#### 功能描述
管理团队成员的基本信息、账号和权限。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M1-01 | 成员列表 | 查看所有成员，支持搜索、筛选 |
| M1-02 | 添加成员 | 添加新成员，设置基本信息和角色 |
| M1-03 | 编辑成员 | 修改成员信息 |
| M1-04 | 禁用/启用成员 | 软删除，保留历史数据 |

### 3.3 M2 - 项目管理

#### 功能描述
管理AI项目的全生命周期，包括创建、成员分配、状态管理。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M2-01 | 项目列表 | 查看所有项目，支持状态筛选 |
| M2-02 | 创建项目 | 创建新项目，设置基本信息、时间、负责人 |
| M2-03 | 项目详情 | 查看项目完整信息，包含任务、会议、进度 |
| M2-04 | 编辑项目 | 修改项目信息 |
| M2-05 | 项目成员管理 | 添加/移除项目成员 |
| M2-06 | 项目归档 | 完成的项目归档处理 |

### 3.4 M3 - 会议纪要

#### 功能描述
记录项目相关的会议内容，作为任务来源的追溯依据。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M3-01 | 会议纪要列表 | 查看项目下所有会议纪要 |
| M3-02 | 创建会议纪要 | 记录会议信息、参会人员、会议内容 |
| M3-03 | 编辑会议纪要 | 修改会议纪要内容 |
| M3-04 | 查看关联任务 | 查看该会议产生的所有任务 |

### 3.5 M4 - 任务管理

#### 功能描述
管理项目下的具体任务，跟踪任务状态和工时。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M4-01 | 任务列表 | 查看任务，支持看板/列表视图切换 |
| M4-02 | 创建任务 | 创建任务，**必须选择关联会议纪要**（可选"无关联"） |
| M4-03 | 任务详情 | 查看任务详情、工时记录、状态历史 |
| M4-04 | 编辑任务 | 修改任务信息 |
| M4-05 | 状态更新 | 更新任务状态（待办→进行中→评审→完成） |
| M4-06 | 我的任务 | 查看分配给自己的所有任务 |

#### 任务状态流转
```
┌──────┐     ┌──────────┐     ┌──────────┐     ┌──────────┐     ┌──────┐
│ 待办  │ ──→ │ 任务评审  │ ──→ │  进行中   │ ──→ │ 成果评审  │ ──→ │ 完成  │
│ todo │     │task_review│     │in_progress│     │result_review│    │ done │
└──────┘     └──────────┘     └──────────┘     └──────────┘     └──────┘
                  │                 │                 │
                  ↓                 ↓                 ↓
              (打回待办)        (打回任务评审)      (打回进行中)

评审阶段说明：
• 任务评审（开发前）：评审需求理解、技术方案设计，确认方案可行后再开发
• 成果评审（开发后）：评审代码逻辑、功能实现、测试结果
```

#### 状态更新规则与权限

| 状态变更 | 触发条件 | 操作权限 | 前置条件 |
|----------|----------|----------|----------|
| 待办 → 任务评审 | 提交需求/方案评审 | 负责人 | 已填写需求/方案说明 |
| 任务评审 → 待办 | 评审不通过 | 评审人（干系人/项目负责人） | 填写打回原因 |
| 任务评审 → 进行中 | 评审通过，开始开发 | 评审人（干系人/项目负责人） | 无 |
| 进行中 → 任务评审 | 方案需重新评审 | 负责人 | 无 |
| 进行中 → 成果评审 | 开发完成，提交验收 | 负责人 | 代码已提交/功能已完成 |
| 成果评审 → 进行中 | 评审不通过 | 评审人（干系人/项目负责人） | 填写打回原因 |
| 成果评审 → 已完成 | 评审通过 | 评审人（干系人/项目负责人） | 无 |

#### 状态更新入口

1. **任务详情页**：顶部状态徽章下拉菜单、状态操作栏按钮
2. **看板视图**：拖拽任务卡片到目标列
3. **任务列表**：右键菜单快速更改状态

#### 干系人角色

| 角色 | 说明 | 权限 |
|------|------|------|
| **负责人** | 任务主要执行人 | 更新状态、记录工时、提交评审 |
| **评审人** | 负责评审的干系人 | 审核通过/打回、填写评审意见 |
| **协作者** | 参与协作的干系人 | 查看详情、接收通知、记录工时 |
| **干系人** | 普通关注人 | 查看详情、接收通知 |

### 3.6 M5 - 日报管理

#### 功能描述
记录每日工作内容，关联具体任务和消耗工时。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M5-01 | 填写日报 | 添加工作记录，选择任务、填写工时和内容描述 |
| M5-02 | 日报列表 | 查看自己的日报历史 |
| M5-03 | 编辑日报 | 修改当天的日报记录 |
| M5-04 | 团队日报 | 管理者查看团队成员日报 |
| M5-05 | 日报统计 | 按日期/项目统计工时 |

#### 日报填写界面逻辑
```
┌─────────────────────────────────────────────────────────────┐
│  日期选择: [2026-01-14]                                      │
├─────────────────────────────────────────────────────────────┤
│  工作记录 #1                                                 │
│  ├─ 项目: [下拉选择项目]                                      │
│  ├─ 任务: [下拉选择该项目的任务]                               │
│  ├─ 工时: [2.5] 小时                                         │
│  └─ 描述: [完成了XXX功能的核心算法开发...]                     │
├─────────────────────────────────────────────────────────────┤
│  工作记录 #2                                                 │
│  ├─ ...                                                      │
├─────────────────────────────────────────────────────────────┤
│  [+ 添加工作记录]                                             │
├─────────────────────────────────────────────────────────────┤
│  今日遇到的问题: [可选填写]                                    │
│  明日工作计划: [可选填写]                                      │
├─────────────────────────────────────────────────────────────┤
│  今日总工时: 6.5 小时                        [保存] [提交]    │
└─────────────────────────────────────────────────────────────┘
```

### 3.7 M6 - AI周报

#### 功能描述
利用AI能力，根据日报数据自动生成周报。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M6-01 | 生成个人周报 | 基于个人日报生成个人周报 |
| M6-02 | 生成项目周报 | 基于项目所有成员日报生成项目周报 |
| M6-03 | 周报编辑 | 对AI生成的周报进行人工修改 |
| M6-04 | 周报历史 | 查看历史周报 |
| M6-05 | 周报导出 | 导出周报为Word/PDF格式 |

#### AI生成逻辑

**个人周报输入**:
- 成员本周所有日报记录
- 关联的任务信息
- 任务状态变更

**项目周报输入**:
- 项目本周所有成员的日报记录
- 项目下任务的状态变更
- 项目整体进度数据

**输出格式**:
```markdown
## 周报 (2026.01.06 - 2026.01.12)

### 一、本周工作总结
[AI生成的3-5句话概括]

### 二、主要成果
1. [项目A] 完成XXX功能开发
2. [项目B] 解决XXX问题
...

### 三、遇到的问题
1. 问题描述及解决方案
...

### 四、下周计划
1. 计划事项
...
```

### 3.8 M7 - 数据看板

#### 功能描述
多维度数据可视化，支持个人和项目两个视角。

#### 功能清单
| 功能ID | 功能名称 | 描述 |
|--------|----------|------|
| M7-01 | 个人工作统计 | 查看个人工时分布、任务完成情况 |
| M7-02 | 项目进度概览 | 查看项目整体进度、燃尽图 |
| M7-03 | 工时分析 | 预估工时vs实际工时对比 |
| M7-04 | 成员贡献分析 | 项目各成员工时贡献占比 |
| M7-05 | 趋势分析 | 周/月工时趋势图 |

#### 看板展示内容

**个人视角**:
- 本周/本月工时统计
- 工时项目分布饼图
- 任务完成率
- 工时趋势折线图

**项目视角**:
- 项目整体完成率
- 各成员工时贡献柱状图
- 预估vs实际工时对比
- 项目燃尽图
- 任务状态分布

---

## 4. 数据模型

### 4.1 ER图

```
┌─────────────┐       ┌─────────────┐       ┌─────────────┐
│   members   │       │  projects   │       │  meetings   │
├─────────────┤       ├─────────────┤       ├─────────────┤
│ id (PK)     │       │ id (PK)     │       │ id (PK)     │
│ name        │←──┐   │ name        │←─────→│ project_id  │
│ email       │   │   │ code        │       │ title       │
│ role        │   │   │ owner_id(FK)│───┐   │ meeting_date│
│ status      │   │   │ status      │   │   │ content     │
└─────────────┘   │   └─────────────┘   │   └─────────────┘
       ↑          │          ↑          │          ↑
       │          │          │          │          │
       │    ┌─────┴──────────┴──────┐   │          │
       │    │   project_members     │   │          │
       │    ├───────────────────────┤   │          │
       │    │ project_id (FK)       │   │          │
       │    │ member_id (FK)        │   │          │
       │    └───────────────────────┘   │          │
       │                                │          │
       │    ┌───────────────────────────┴──────────┴───┐
       │    │               tasks                       │
       │    ├───────────────────────────────────────────┤
       │    │ id (PK)                                   │
       │    │ project_id (FK)                           │
       └────│ assignee_id (FK)                          │
            │ meeting_id (FK, nullable) ←── 可为空       │
            │ title                                     │
            │ estimated_hours                           │
            │ actual_hours                              │
            │ status                                    │
            └───────────────────────────────────────────┘
                              ↑
                              │
            ┌─────────────────┴─────────────────┐
            │         daily_work_logs           │
            ├───────────────────────────────────┤
            │ id (PK)                           │
            │ member_id (FK)                    │
            │ task_id (FK)                      │
            │ project_id (FK)                   │
            │ work_date                         │
            │ hours                             │
            │ description                       │
            └───────────────────────────────────┘
                              │
                              ▼
            ┌───────────────────────────────────┐
            │         weekly_reports            │
            ├───────────────────────────────────┤
            │ id (PK)                           │
            │ report_type (personal/project)    │
            │ member_id (FK, nullable)          │
            │ project_id (FK, nullable)         │
            │ week_start / week_end             │
            │ summary, achievements, issues...  │
            └───────────────────────────────────┘
```

### 4.2 表结构详细说明

详见附录文件: [database_schema.sql](./database_schema.sql)

---

## 5. API设计

### 5.1 API规范

- **基础路径**: `/api/v1`
- **认证方式**: JWT Token (Bearer)
- **响应格式**: JSON

#### 通用响应结构
```json
{
  "code": 200,
  "message": "success",
  "data": { ... }
}
```

#### 错误响应结构
```json
{
  "code": 400,
  "message": "错误描述",
  "errors": [ ... ]
}
```

### 5.2 API列表

详见附录文件: [api_specification.md](./api_specification.md)

---

## 6. UI/UX设计

### 6.1 设计原则

| 原则 | 描述 |
|------|------|
| **简洁高效** | 减少操作步骤，日报填写应在3分钟内完成 |
| **信息层次** | 重要信息突出显示，次要信息适当隐藏 |
| **一致性** | 统一的交互模式和视觉风格 |
| **响应式** | 支持PC端主要使用场景 |

### 6.2 页面结构

```
┌─────────────────────────────────────────────────────────────────────┐
│  Logo    [项目管理]  [任务]  [日报]  [周报]  [看板]     🔔  👤 张三  │
├──────────┬──────────────────────────────────────────────────────────┤
│          │                                                          │
│  侧边栏   │                    主内容区                               │
│          │                                                          │
│ 📊 工作台 │   ┌─────────────────────────────────────────────────┐   │
│ 📁 项目   │   │                                                 │   │
│ ✅ 任务   │   │                                                 │   │
│ 📝 日报   │   │                                                 │   │
│ 📊 周报   │   │                                                 │   │
│ 📈 看板   │   │                                                 │   │
│ ⚙️ 设置   │   │                                                 │   │
│          │   │                                                 │   │
│          │   └─────────────────────────────────────────────────┘   │
└──────────┴──────────────────────────────────────────────────────────┘
```

### 6.3 核心页面线框图

详见附录文件: [wireframes.md](./wireframes.md)

---

## 7. 技术选型

### 7.1 技术栈

| 层级 | 技术 | 版本 | 说明 |
|------|------|------|------|
| **前端框架** | React | 18.x | 组件化开发 |
| **前端语言** | TypeScript | 5.x | 类型安全 |
| **UI组件库** | Ant Design | 5.x | 企业级组件 |
| **前端脚手架** | Vite | 5.x | 快速构建 |
| **状态管理** | Zustand | 4.x | 轻量状态管理 |
| **后端框架** | FastAPI | 0.100+ | 高性能Python框架 |
| **ORM** | SQLAlchemy | 2.x | 数据库操作 |
| **数据库** | PostgreSQL | 15+ | 关系型数据库 |
| **缓存** | Redis | 7.x | 缓存与会话 |
| **AI服务** | OpenAI API | - | GPT-4用于周报生成 |
| **容器化** | Docker | 24+ | 容器部署 |
| **Web服务器** | Nginx | 1.24+ | 反向代理 |

### 7.2 项目目录结构

```
project_management/
├── docs/                      # 文档目录
│   ├── SPEC.md               # 本文档
│   ├── database_schema.sql   # 数据库脚本
│   ├── api_specification.md  # API规范
│   └── wireframes.md         # 页面线框图
│
├── backend/                   # 后端代码
│   ├── app/
│   │   ├── api/              # API路由
│   │   │   ├── v1/
│   │   │   │   ├── members.py
│   │   │   │   ├── projects.py
│   │   │   │   ├── tasks.py
│   │   │   │   ├── meetings.py
│   │   │   │   ├── daily_logs.py
│   │   │   │   └── weekly_reports.py
│   │   │   └── deps.py
│   │   ├── core/             # 核心配置
│   │   │   ├── config.py
│   │   │   └── security.py
│   │   ├── models/           # 数据模型
│   │   ├── schemas/          # Pydantic模型
│   │   ├── services/         # 业务逻辑
│   │   │   └── ai_service.py # AI周报生成
│   │   └── main.py
│   ├── alembic/              # 数据库迁移
│   ├── requirements.txt
│   └── Dockerfile
│
├── frontend/                  # 前端代码
│   ├── src/
│   │   ├── components/       # 公共组件
│   │   ├── pages/            # 页面组件
│   │   │   ├── Dashboard/
│   │   │   ├── Projects/
│   │   │   ├── Tasks/
│   │   │   ├── DailyLog/
│   │   │   ├── WeeklyReport/
│   │   │   └── Analytics/
│   │   ├── services/         # API服务
│   │   ├── stores/           # 状态管理
│   │   ├── utils/
│   │   └── App.tsx
│   ├── package.json
│   └── Dockerfile
│
├── docker-compose.yml         # Docker编排
└── README.md                  # 项目说明
```

---

## 8. 开发计划

### 8.1 里程碑规划

| 阶段 | 里程碑 | 周期 | 交付物 |
|------|--------|------|--------|
| **Phase 1** | 基础框架 | 1周 | 项目骨架、数据库、基础CRUD |
| **Phase 2** | 核心功能 | 2周 | 项目/任务/日报管理完整功能 |
| **Phase 3** | AI周报 | 1周 | AI周报生成功能 |
| **Phase 4** | 数据看板 | 1周 | 统计分析与可视化 |
| **Phase 5** | 优化上线 | 1周 | 测试、优化、部署 |

### 8.2 Phase 1 详细任务

| 任务 | 预估工时 | 描述 |
|------|----------|------|
| 后端项目初始化 | 4h | FastAPI项目结构搭建 |
| 数据库设计实现 | 4h | PostgreSQL表创建、迁移脚本 |
| 前端项目初始化 | 4h | React + Vite + Ant Design配置 |
| 成员管理CRUD | 8h | 后端API + 前端页面 |
| 项目管理CRUD | 8h | 后端API + 前端页面 |
| 用户认证 | 8h | JWT登录、权限控制 |

### 8.3 Phase 2 详细任务

| 任务 | 预估工时 | 描述 |
|------|----------|------|
| 会议纪要管理 | 8h | 完整CRUD功能 |
| 任务管理 | 16h | 任务CRUD、状态流转、关联会议 |
| 日报填写 | 16h | 日报填写、关联任务、工时计算 |
| 任务工时自动计算 | 4h | 根据日报更新任务实际工时 |

---

## 9. 附录

### 9.1 相关文档

- [database_schema.sql](./database_schema.sql) - 完整数据库脚本
- [api_specification.md](./api_specification.md) - 详细API规范
- [wireframes.md](./wireframes.md) - 页面线框图

### 9.2 术语表

| 术语 | 说明 |
|------|------|
| **工时** | 团队成员投入到具体任务的时间，单位为小时 |
| **日报** | 每日工作记录，包含多条关联任务的工作条目 |
| **周报** | 每周工作汇总，由AI根据日报自动生成 |
| **会议纪要** | 项目会议的记录，作为任务来源的追溯依据 |

### 9.3 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2026-01-14 | 初始版本 | AI Assistant |

---

**文档结束**
